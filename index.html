<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>캠페인 셀프 견적 & 성과 모니터</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body, html { margin:0; padding:0; width:100%; height:100%; overflow:hidden; background:#000; font-family:'Inter',sans-serif; }
    #three-container { position:fixed; top:0; left:0; width:100%; height:100%; z-index:0; }
    .ui-container { position:relative; z-index:1; max-width:420px; margin:0 auto; height:100%; display:flex; flex-direction:column; background:rgba(0,0,0,0.4); }
    main { flex:1; display:flex; align-items:center; justify-content:center; }
    section.persuasive, section.metrics { padding:1rem; color:#ccc; }
    section.persuasive { background:rgba(255,255,255,0.05); }
    footer { padding:0 1rem 1rem; }
    .accordion-content { max-height:0; overflow:hidden; transition:max-height .3s, padding .3s; padding:0; }
    .accordion-content.open { max-height:400px; padding:.5rem 0; }
  </style>
</head>
<body>
  <div id="three-container"></div>
  <div class="ui-container">
    <main>
      <div class="text-center">
        <p class="text-gray-400 text-lg">예상 도달</p>
        <p id="total-reach" class="text-6xl font-extrabold text-white">0</p>
      </div>
    </main>
    <section class="persuasive">
      <h2 class="text-white font-semibold mb-2">실제 고객 평균 성과</h2>
      <ul class="list-disc list-inside space-y-1 text-sm">
        <li>평균 전환율<span class="float-right font-bold text-white">6.2%</span></li>
        <li>클릭당 비용(CPC)<span class="float-right font-bold text-white">₩350</span></li>
        <li>월간 리드 확보<span class="float-right font-bold text-white">1,200건</span></li>
        <li>평균 ROI<span class="float-right font-bold text-white">165%</span></li>
      </ul>
    </section>
    <section class="metrics">
      <h2 class="text-white font-semibold mb-2">서비스 패키지</h2>
      <div id="accordion-container" class="space-y-3"></div>
    </section>
    <footer>
      <div class="flex justify-between items-center mb-3">
        <span class="text-gray-400">총 합계 (VAT 별도)</span>
        <span id="total-price" class="text-xl font-bold text-white">0원</span>
      </div>
      <button id="submit-campaign-btn" class="w-full bg-blue-600 text-white font-bold py-3 rounded-full disabled:bg-gray-700" disabled>무료 견적 신청하기</button>
    </footer>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script>
    let scene, camera, renderer, stars;
    let starGeo, starMat;
    const STAR_COUNT = 20000;
    initScene(); animateScene();
    function initScene() {
      scene = new THREE.Scene();
      camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 1, 2000);
      camera.position.z = 400;
      renderer = new THREE.WebGLRenderer({ alpha:true, antialias:true });
      renderer.setPixelRatio(window.devicePixelRatio);
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.getElementById('three-container').appendChild(renderer.domElement);
      window.addEventListener('resize', ()=>{
        camera.aspect = window.innerWidth/window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      });
      starGeo = new THREE.BufferGeometry();
      const positions = new Float32Array(STAR_COUNT*3);
      for (let i=0;i<STAR_COUNT;i++){
        positions[i*3]   = (Math.random()-0.5)*2000;
        positions[i*3+1] = (Math.random()-0.5)*2000;
        positions[i*3+2] = (Math.random()-0.5)*2000;
      }
      starGeo.setAttribute('position', new THREE.BufferAttribute(positions,3));
      starGeo.setDrawRange(0,0);
      const sprite = new THREE.TextureLoader().load('https://threejs.org/examples/textures/sprites/spark1.png');
      starMat = new THREE.PointsMaterial({ map:sprite, size:2, transparent:true, blending:THREE.AdditiveBlending, depthWrite:false, opacity:0.5 });
      stars = new THREE.Points(starGeo, starMat);
      scene.add(stars);
    }
    function animateScene() {
      const reach = parseInt(document.getElementById('total-reach').textContent.replace(/,/g,''))||0;
      let ratio = Math.min(reach/300000,1);
      const eff = 0.1 + ratio*0.9;
      starGeo.setDrawRange(0, Math.floor(STAR_COUNT*eff));
      starMat.opacity = 0.2 + 0.8*ratio;
      starMat.size    = 1 + 9*ratio;
      stars.rotation.y +=0.0007; stars.rotation.x +=0.0004;
      renderer.render(scene, camera);
      requestAnimationFrame(animateScene);
    }
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', ()=>{
      const productsData = {
        '네이버 블로그': { name:'네이버 블로그', items:[
          {id:'blog-basic', name:'기본 리뷰 패키지', price:120000, reach:1500},
          {id:'blog-standard', name:'표준 콘텐츠 패키지', price:300000, reach:5000},
          {id:'blog-premium', name:'프리미엄 캠페인 패키지', price:600000, reach:15000}
        ]},
        '인스타그램': { name:'인스타그램', items:[
          {id:'insta-image', name:'이미지 콘텐츠 패키지', price:200000, reach:30000},
          {id:'insta-reels', name:'Reels 숏폼 패키지', price:450000, reach:80000},
          {id:'insta-combo', name:'콤보 패키지', price:1000000, reach:200000}
        ]},
        '페이스북 광고': { name:'페이스북 광고', items:[
          {id:'fb-cpm', name:'CPM 캠페인', price:250000, reach:50000},
          {id:'fb-cpc', name:'CPC 캠페인', price:400000, reach:80000}
        ]},
        '유튜브 광고': { name:'유튜브 광고', items:[
          {id:'yt-skip', name:'스킵가능', price:800000, reach:150000},
          {id:'yt-noskip', name:'스킵불가', price:1000000, reach:120000}
        ]}
      };
      const cart = {};
      const totalReachEl = document.getElementById('total-reach');
      const acc = document.getElementById('accordion-container');
      const priceEl = document.getElementById('total-price');
      const btn = document.getElementById('submit-campaign-btn');
      function render(){
        let html='';
        for (let key in productsData) {
          const ch = productsData[key]; let itemsHtml='';
          ch.items.forEach(p=>{ const qty = cart[p.id]||0;
            itemsHtml+=`<div class="flex justify-between items-center bg-gray-800 p-3 rounded-lg"><div><p class="font-semibold text-white">${p.name}</p><p class="text-xs text-gray-400">${p.price.toLocaleString()}원 / 명</p></div><div class="flex items-center space-x-2"><button data-id="${p.id}" class="cart-quantity-change bg-gray-700 rounded w-6 h-6 text-white">−</button><span class="text-white font-bold">${qty}</span><button data-id="${p.id}" class="cart-quantity-change bg-blue-600 rounded w-6 h-6 text-white">＋</button></div></div>`;
          });
          html+=`<div class="accordion-item bg-gray-900 rounded-xl border border-gray-800 overflow-hidden"><button class="accordion-header w-full text-left p-4 flex justify-between items-center"><span class="font-bold text-white">${ch.name}</span><svg class="w-5 h-5 text-gray-400 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg></button><div class="accordion-content px-4 space-y-3">${itemsHtml}</div></div>`;
        }
        acc.innerHTML = html;
        attachListeners();
      }
      function attachListeners(){
        document.querySelectorAll('.accordion-header').forEach(h=>h.addEventListener('click',()=>{ const c=h.nextElementSibling, ic=h.querySelector('svg'); document.querySelectorAll('.accordion-content.open').forEach(o=>{ if(o!==c){ o.classList.remove('open'); o.previousElementSibling.querySelector('svg').classList.remove('rotate-180'); }}); c.classList.toggle('open'); ic.classList.toggle('rotate-180'); }));
        document.querySelectorAll('.cart-quantity-change').forEach(b=>b.addEventListener('click', e=>{ e.stopPropagation(); e.preventDefault(); const id=b.dataset.id; if(b.textContent==='＋' && !(cart[id]>=100)) cart[id]=(cart[id]||0)+1; else if(cart[id]>0){ cart[id]--; if(!cart[id]) delete cart[id]; } render(); updateTotals(); }));
      }
      let raf;
      function animateReach(end){ const start=parseInt(totalReachEl.textContent.replace(/,/g,''))||0; if(start===end) return; const dur=800; let st; function step(ts){ if(!st) st=ts; const p=Math.min((ts-st)/dur,1); totalReachEl.textContent = Math.floor(p*(end-start)+start).toLocaleString(); if(p<1) raf=requestAnimationFrame(step); } cancelAnimationFrame(raf); raf=requestAnimationFrame(step); }
      function updateTotals(){ let price=0, reach=0; Object.values(productsData).forEach(ch=>ch.items.forEach(p=>{ if(cart[p.id]){ price+=p.price*cart[p.id]; reach+=p.reach*cart[p.id]; }})); priceEl.textContent=`${price.toLocaleString()}원`; btn.disabled = price===0; animateReach(reach); }
      render(); updateTotals();
    });
  </script>
</body>
</html>
