<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>캠페인 빌더 v39.0 (원본 컨셉 복원)</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    <style>
        body, html {
            margin:0; padding:0;
            width:100%; height:100%; overflow:hidden;
            font-family:'Inter', sans-serif;
            background-color:#0d0c12;
            color:#e5e7eb;
        }
        #arc-canvas {
            position:fixed; top:0; left:0;
            width:100%; height:100%; z-index:0;
        }
        .ui-container {
            position:relative; z-index:1;
            max-width:400px; margin:0 auto;
            height:100%; display:flex; flex-direction:column;
        }
        main { flex:1; display:flex; align-items:center; justify-content:center; }
        footer { padding:0 1rem 1rem; flex-shrink:0; }
        .accordion-content { max-height:0; overflow:hidden;
            transition:max-height 0.4s ease-out, padding 0.4s ease-out;
            padding:0;
        }
        .accordion-content.open { max-height:400px; padding:0.75rem 0; }
    </style>
</head>
<body>
    <canvas id="arc-canvas"></canvas>
    <div class="ui-container max-w-md mx-auto">
        <!-- 예상 도달 -->
        <main>
            <div class="text-center">
                <p class="text-gray-400 text-lg">예상 도달</p>
                <p id="total-reach" class="text-7xl font-extrabold text-white">0</p>
            </div>
        </main>
        <!-- 서비스 패키지 -->
        <section class="px-4 mb-4 text-sm text-gray-400">
            <h2 class="text-white font-semibold mb-2">참고 지표</h2>
            <ul class="list-disc list-inside space-y-1">
                <li>블로그 리뷰: 평균 노출 1,250회, 클릭률 3.2%</li>
                <li>인스타 이미지: 평균 노출 30,000회, 참여율 4.8%</li>
                <li>페이스북 CPM: 평균 노출 50,000회, 전환율 5.5%</li>
                <li>유튜브 스킵가능: 평균 노출 150,000회, 시청완료율 45%</li>
            </ul>
        </section>
        <footer>
            <div id="accordion-container" class="space-y-3 mb-4"></div>
            <div class="flex justify-between items-center mb-3">
                <span class="text-gray-400">총 합계 (VAT 별도)</span>
                <span id="total-price" class="text-xl font-bold text-white">0원</span>
            </div>
            <button id="submit-campaign-btn" class="w-full bg-blue-600 text-white font-bold py-3 rounded-full disabled:bg-gray-700" disabled>
                캠페인 신청하기
            </button>
        </footer>
    </div>
    <!-- Arc Canvas Script -->
    <script>
        const canvas = document.getElementById('arc-canvas');
        const ctx = canvas.getContext('2d');
        let targetProgress = 0, currentProgress = 0, orbRotation = 0;
        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize); resize();
        function updateGraphic(reach) {
            const maxReach = 150000;
            const ratio = Math.min(reach / maxReach, 1);
            // 100K 구간 중심으로 반응 집중 (시그모이드)
            const x = ratio;
            const sigma = 1 / (1 + Math.exp(-12 * (x - 0.66)));
            targetProgress = 0.1 + sigma * 0.8;
        }
        function draw() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            currentProgress += (targetProgress - currentProgress) * 0.05;
            const cx = canvas.width/2, cy = canvas.height/2;
            const r = canvas.width*0.9;
            // Top Arc
            if(currentProgress>0.01) {
                const a1 = Math.PI*1.2, a2 = Math.PI*1.8;
                const end = a1 + (a2 - a1)*currentProgress;
                const grad = ctx.createLinearGradient(cx-r, cy, cx+r, cy);
                grad.addColorStop(0,'#60a5fa'); grad.addColorStop(0.5,'#f472b6'); grad.addColorStop(1,'#fb923c');
                ctx.beginPath(); ctx.arc(cx, canvas.height*0.85, r, a1, end);
                ctx.strokeStyle=grad; ctx.lineWidth=8; ctx.lineCap='round'; ctx.shadowBlur=20; ctx.shadowColor='rgba(255,255,255,0.3)';
                ctx.stroke(); ctx.shadowBlur=0;
            }
            // Bottom Arc
            if(currentProgress>0.01) {
                const a1=Math.PI*0.2, a2=Math.PI*0.8;
                const end=a1+(a2-a1)*currentProgress;
                const grad = ctx.createLinearGradient(cx-r, cy, cx+r, cy);
                grad.addColorStop(0,'#fb923c'); grad.addColorStop(0.5,'#f472b6'); grad.addColorStop(1,'#60a5fa');
                ctx.beginPath(); ctx.arc(cx, canvas.height*0.15, r, a1, end);
                ctx.strokeStyle=grad; ctx.lineWidth=8; ctx.lineCap='round'; ctx.shadowBlur=20; ctx.shadowColor='rgba(255,255,255,0.3)';
                ctx.stroke(); ctx.shadowBlur=0;
            }
            // Orb
            orbRotation += 0.01;
            const ox = cx + Math.cos(orbRotation)*40;
            const oy = canvas.height*0.2 + Math.sin(orbRotation*2)*5;
            const orbGrad = ctx.createLinearGradient(ox-15,oy-15,ox+15,oy+15);
            orbGrad.addColorStop(0,'#f87171'); orbGrad.addColorStop(1,'#60a5fa');
            ctx.beginPath(); ctx.arc(ox,oy,15,0,Math.PI*2);
            ctx.fillStyle = orbGrad; ctx.fill();
            requestAnimationFrame(draw);
        }
        draw();
    </script>
    <!-- Campaign Builder Logic -->
    <script>
        document.addEventListener('DOMContentLoaded',()=>{
            const productsData={
                '블로그 리뷰':[
                    {id:'blog-1',name:'단일 리뷰 포스트',price:150000,reach:1200},
                    {id:'blog-3',name:'3개 묶음 리뷰',price:400000,reach:3500},
                    {id:'blog-5',name:'5개 묶음 리뷰',price:600000,reach:6000}
                ],
                '인스타 이미지':[
                    {id:'insta-static',name:'정적 이미지 포스트',price:200000,reach:30000},
                    {id:'insta-story',name:'스토리 광고(5회)',price:250000,reach:40000},
                    {id:'insta-reels',name:'Reels 숏폼 광고',price:500000,reach:80000}
                ],
                '페이스북':[
                    {id:'fb-cpm',name:'피드 CPM 캠페인',price:300000,reach:50000},
                    {id:'fb-cpc',name:'동영상 CPM 캠페인',price:450000,reach:70000},
                    {id:'fb-lead',name:'리드 폼 광고',price:500000,reach:60000}
                ],
                '유튜브':[
                    {id:'yt-bumper',name:'6초 Bumper 광고',price:500000,reach:80000},
                    {id:'yt-skippable',name:'스킵 가능 프리롤',price:900000,reach:150000},
                    {id:'yt-noskip',name:'스킵 불가 프리롤',price:1100000,reach:120000}
                ]
            };
            const cart={};
            const totalReachEl=document.getElementById('total-reach');
            const totalPriceEl=document.getElementById('total-price');
            const accordion=document.getElementById('accordion-container');
            const submitBtn=document.getElementById('submit-campaign-btn');
            function render(){
                let html='';
                for(let cat in productsData){
                    html+=`<div class='accordion-item'><div class='accordion-header'><span>${cat}</span><svg class='w-5 h-5 text-gray-400 transition-transform' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/></svg></div><div class='accordion-content'>`;
                    productsData[cat].forEach(item=>{
                        const q=cart[item.id]||0;
                        html+=`<div class='option'><div class='option-info'><p>${item.name}</p><span>${item.reach.toLocaleString()} 도달</span></div><div class='option-controls'><button data-id='${item.id}'>−</button><span>${q}</span><button data-id='${item.id}'>＋</button></div></div>`;
                    });
                    html+='</div></div>';
                }
                accordion.innerHTML=html;
                attach();
            }
            function attach(){
                document.querySelectorAll('.accordion-header').forEach(h=>h.addEventListener('click',()=>{
                    const c=h.nextElementSibling, i=h.querySelector('svg');
                    document.querySelectorAll('.accordion-content.open').forEach(o=>{if(o!==c){o.classList.remove('open');o.previousElementSibling.querySelector('svg').classList.remove('rotate-180');}});
                    c.classList.toggle('open'); i.classList.toggle('rotate-180');
                }));
                document.querySelectorAll('.option-controls button').forEach(b=>b.addEventListener('click',e=>{
                    e.stopPropagation(); const id=b.dataset.id;
                    if(b.textContent==='＋') cart[id]=(cart[id]||0)+1; else if(cart[id]>0){cart[id]--; if(!cart[id]) delete cart[id];}
                    b.parentElement.querySelector('span').textContent=cart[id]||0;
                    let totalPrice=0, totalReach=0;
                    for(let key in cart){
                        const item=Object.values(productsData).flat().find(x=>x.id===key);
                        totalPrice+=item.price*cart[key]; totalReach+=item.reach*cart[key];
                    }
                    totalPriceEl.textContent=`${totalPrice.toLocaleString()}원`;
                    submitBtn.disabled=totalPrice===0;
                    updateGraphic(totalReach);
                }));
            }
            render();
        });
    </script>
</body>
</html>
